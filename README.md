# <p align="center">Google sheets - PostgreSQL - Flask API - Docker  

---  

### Исходные данные
Необходимо разработать скрипт на языке Python 3, который будет выполнять следующие функции:  
1) Получать данные с документа при помощи Google API, выполненного в Google Sheets  
2) Данные должны добавляться в БД, в том же виде, что и в файле-источнике, с добавлением колонки "стоимость в рубл."  
а) Необходимо создать БД на основе СУБД PostgreSQL.
b) Данные для перевода $ в рубли необходимо получать по текущему курсу [ЦБ РФ](https://www.cbr.ru/development/SXML/).  
3) Скрипт работает постоянно для обеспечения обновления данных в онлайн режиме (необходимо учитывать, что строки в Google Sheets таблицу могут удаляться, добавляться и изменяться).  
4) Упаковка решения в docker-контейнер
5) Разработка функционала проверки соблюдения "срока поставки" из таблицы. В случае, если срок прошел, скрипт отправляет уведомление в Телеграм.  
6) Разработка одностраничного web-приложения на основе Django или Flask. Front-end React.  

---

### Установка
1) Инициализируем локальный git-репозиторий и клонируем в него файлы проекта:
```shell
git clone git@github.com:AlekseyGolikov/Googlesheets-PostgreSQL-Flask-Docker.git
```
2) Получаем token телеграм-бота, а также цифровой ID абонента, которому следует направлять сообщения.  
Заносим учетные данные бота в файл creds/env_tg.list:
```text
# creds/env_tg.list  

TG_CHAT=1234567890  
TG_TOKEN=1234567890:ASfsAWsdfSdJKHt-dfCGSsx5d8e_RD9dfvI  
```
*Прим.: в примере заданы несуществующие данные для образца, если значения пропущены, то не будет работать функция оповещения*
3) Создаем docker-контейнеры для базы данных и web-сервера:
```shell
docker-compose build
docker-compose up -d
```
Скрипт реализует журналирование этапов работы приложения:
- в файл logs/logging.log
- в консоль stdout при помощи команды
```shell
docker-compose logs -f web
```
4) Документ googlesheet доступен по ссылке:
```html
https://docs.google.com/spreadsheets/d/1r4JlWmezNj_z1tbfQpf7MHSzU32Ju75zA_hsOcfrDlQ/edit#gid=0
```
5) Отображение страницы web-сервера доступно по ссылке:
```html
http://127.0.0.1:5000/
```